# Production Environment Configuration
# CapitalCue

# =====================================
# Application Configuration
# =====================================
NODE_ENV=production
APP_NAME="CapitalCue"
APP_VERSION="1.0.0"

# =====================================
# Server Configuration
# =====================================
API_PORT=3001
WEB_PORT=3000
HOST=0.0.0.0

# Frontend URL for CORS
FRONTEND_URL=https://capitalcue.com
API_URL=https://api.capitalcue.com

# =====================================
# Database Configuration
# =====================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database?options
DATABASE_URL=postgresql://fa_user:CHANGE_THIS_PASSWORD@postgres:5432/financial_analyzer?schema=public&sslmode=require

# Connection pool settings
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20

# =====================================
# Redis Configuration (Caching & Sessions)
# =====================================
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_DB=0

# =====================================
# Authentication & Security
# =====================================
# JWT Secret - MUST be changed in production
JWT_SECRET=CHANGE_THIS_JWT_SECRET_TO_SECURE_RANDOM_STRING_256_BITS
JWT_EXPIRES_IN=7d

# Session configuration
SESSION_SECRET=CHANGE_THIS_SESSION_SECRET_TO_SECURE_RANDOM_STRING
SESSION_MAX_AGE=604800000

# Encryption key for sensitive data (64 hex characters = 256 bits)
ENCRYPTION_KEY=CHANGE_THIS_TO_SECURE_64_HEX_CHARACTER_STRING_FOR_AES256_ENCRYPTION

# HMAC secret for audit log integrity
HMAC_SECRET=CHANGE_THIS_HMAC_SECRET_FOR_AUDIT_LOG_INTEGRITY
AUDIT_INTEGRITY_KEY=CHANGE_THIS_AUDIT_INTEGRITY_KEY_FOR_LOG_VERIFICATION

# =====================================
# External Services
# =====================================
# Anthropic Claude AI API
ANTHROPIC_API_KEY=CHANGE_THIS_TO_YOUR_ANTHROPIC_API_KEY

# Email service (for notifications)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=CHANGE_THIS_TO_YOUR_SENDGRID_API_KEY
FROM_EMAIL=noreply@capitalcue.com

# =====================================
# File Storage Configuration
# =====================================
# Maximum file size for uploads (in bytes)
MAX_FILE_SIZE=52428800

# File storage paths
UPLOAD_PATH=/app/uploads
TEMP_PATH=/app/temp
REPORTS_PATH=/app/reports

# AWS S3 Configuration (if using S3 for file storage)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=CHANGE_THIS_TO_YOUR_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_THIS_TO_YOUR_AWS_SECRET_KEY
S3_BUCKET_NAME=capitalcue-documents

# =====================================
# Logging Configuration
# =====================================
LOG_LEVEL=info
LOG_FILE=/app/logs/application.log
ERROR_LOG_FILE=/app/logs/error.log

# Audit logging
AUDIT_LOGGING_ENABLED=true
AUDIT_BATCH_SIZE=100
AUDIT_BATCH_TIMEOUT=5000

# =====================================
# Security Configuration
# =====================================
# CORS configuration
CORS_ORIGIN=https://capitalcue.com
CORS_CREDENTIALS=true

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=1000

# Security headers
HELMET_CSP_ENABLED=true
HELMET_HSTS_MAX_AGE=31536000

# IP validation for sessions
STRICT_IP_VALIDATION=false

# =====================================
# Monitoring & Observability
# =====================================
# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000

# Metrics collection
METRICS_ENABLED=true
METRICS_PORT=9090

# OpenTelemetry configuration
OTEL_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:14268/api/traces
OTEL_SERVICE_NAME=capitalcue-api

# =====================================
# Privacy & Compliance
# =====================================
# Data retention period (in days)
DATA_RETENTION_PERIOD=2555

# GDPR compliance
GDPR_ENABLED=true
DATA_PROCESSING_AGREEMENT_VERSION=1.0
PRIVACY_POLICY_VERSION=2.0

# =====================================
# Performance Configuration
# =====================================
# Worker processes
CLUSTER_WORKERS=0

# Memory limits
NODE_OPTIONS="--max-old-space-size=2048"

# Cache TTL (in seconds)
CACHE_TTL=3600

# =====================================
# MCP Server Configuration
# =====================================
# Document Parser MCP
DOCUMENT_PARSER_URL=http://document-parser:8001
DOCUMENT_PARSER_TIMEOUT=30000

# Constraint Engine MCP
CONSTRAINT_ENGINE_URL=http://constraint-engine:8002
CONSTRAINT_ENGINE_TIMEOUT=10000

# Alert Manager MCP
ALERT_MANAGER_URL=http://alert-manager:8003
ALERT_MANAGER_TIMEOUT=5000

# AI Analyzer MCP
AI_ANALYZER_URL=http://ai-analyzer:8004
AI_ANALYZER_TIMEOUT=60000

# =====================================
# Backup Configuration
# =====================================
# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=capitalcue-backups

# =====================================
# SSL/TLS Configuration
# =====================================
# SSL certificates
SSL_CERT_PATH=/etc/ssl/certs/capitalcue.crt
SSL_KEY_PATH=/etc/ssl/private/capitalcue.key
SSL_CA_PATH=/etc/ssl/certs/ca-certificates.crt

# =====================================
# Development Overrides
# =====================================
# These should be empty in production
DEBUG=
MOCK_EXTERNAL_SERVICES=false
DISABLE_AUTH=false

# =====================================
# Kubernetes/Docker Configuration
# =====================================
# Pod/Container configuration
READINESS_PROBE_PATH=/health/ready
LIVENESS_PROBE_PATH=/health/live
GRACEFUL_SHUTDOWN_TIMEOUT=30000

# Resource limits
CPU_LIMIT=2000m
MEMORY_LIMIT=2Gi

# =====================================
# Feature Flags
# =====================================
# Enable/disable features
FEATURE_AI_ANALYSIS=true
FEATURE_ADVANCED_SECURITY=true
FEATURE_COMPLIANCE_REPORTING=true
FEATURE_REAL_TIME_ALERTS=true
FEATURE_DOCUMENT_SHARING=true

# =====================================
# Third-Party Integrations
# =====================================
# Slack integration (for notifications)
SLACK_WEBHOOK_URL=CHANGE_THIS_TO_YOUR_SLACK_WEBHOOK_URL
SLACK_CHANNEL=#capitalcue-alerts

# PagerDuty integration (for critical alerts)
PAGERDUTY_API_KEY=CHANGE_THIS_TO_YOUR_PAGERDUTY_API_KEY
PAGERDUTY_SERVICE_KEY=CHANGE_THIS_TO_YOUR_PAGERDUTY_SERVICE_KEY

# Analytics
ANALYTICS_ENABLED=true
GOOGLE_ANALYTICS_ID=CHANGE_THIS_TO_YOUR_GA_ID

# =====================================
# IMPORTANT SECURITY NOTES
# =====================================
# 1. Change ALL "CHANGE_THIS_*" values before deployment
# 2. Use strong, random passwords and secrets
# 3. Enable SSL/TLS in production
# 4. Regularly rotate secrets and passwords
# 5. Monitor logs for security events
# 6. Keep dependencies updated
# 7. Use environment-specific configurations
# 8. Implement proper backup and disaster recovery
# 9. Follow principle of least privilege
# 10. Regular security audits and penetration testing