(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{3687:function(e,t,r){Promise.resolve().then(r.bind(r,7755))},7755:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(7573),n=r(5771),a=r(1695),l=r(7653),i=r(8146),o=r(4313);let c=(0,o.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=r(6673),d=r(4823),h=r(6693),f=r(1026),x=r(269),m=r(5330);let y=(0,o.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),v=(0,o.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),p=[{name:"Dashboard",href:"/dashboard",icon:c},{name:"Documents",href:"/documents",icon:u.Z},{name:"Constraints",href:"/constraints",icon:d.Z},{name:"Analysis",href:"/analysis",icon:h.Z},{name:"Alerts",href:"/alerts",icon:f.Z}];function g(e){let{children:t}=e,{user:r,isAuthenticated:o,isLoading:c,logout:u}=(0,n.a)(),d=(0,a.useRouter)(),h=(0,a.usePathname)(),[f,g]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{c||o||d.push("/login")},[o,c,d]),c)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o?(0,s.jsxs)("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[f&&(0,s.jsxs)("div",{className:"fixed inset-0 flex z-40 md:hidden",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>g(!1)}),(0,s.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,s.jsx)("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>g(!1),children:(0,s.jsx)(x.Z,{className:"h-6 w-6 text-white"})})}),(0,s.jsxs)("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[(0,s.jsx)("div",{className:"flex-shrink-0 flex items-center px-4",children:(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Financial Analyzer"})}),(0,s.jsx)("nav",{className:"mt-5 px-2 space-y-1",children:p.map(e=>{let t=h===e.href;return(0,s.jsxs)(i.default,{href:e.href,className:"group flex items-center px-2 py-2 text-base font-medium rounded-md transition-colors ".concat(t?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>g(!1),children:[(0,s.jsx)(e.icon,{className:"mr-4 h-6 w-6"}),e.name]},e.name)})})]}),(0,s.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,s.jsx)(m.Z,{className:"h-4 w-4 text-white"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[null==r?void 0:r.firstName," ",null==r?void 0:r.lastName]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:null==r?void 0:r.userType})]})]})})]})]}),(0,s.jsx)("div",{className:"hidden md:flex md:flex-shrink-0",children:(0,s.jsx)("div",{className:"flex flex-col w-64",children:(0,s.jsxs)("div",{className:"flex flex-col h-0 flex-1 border-r border-gray-200 bg-white",children:[(0,s.jsxs)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[(0,s.jsx)("div",{className:"flex items-center flex-shrink-0 px-4",children:(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Financial Analyzer"})}),(0,s.jsx)("nav",{className:"mt-5 flex-1 px-2 bg-white space-y-1",children:p.map(e=>{let t=h===e.href;return(0,s.jsxs)(i.default,{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ".concat(t?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,s.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]}),(0,s.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,s.jsx)(m.Z,{className:"h-4 w-4 text-white"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[null==r?void 0:r.firstName," ",null==r?void 0:r.lastName]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:null==r?void 0:r.userType})]})]}),(0,s.jsx)("button",{onClick:()=>{u(),d.push("/login")},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Logout",children:(0,s.jsx)(y,{className:"h-4 w-4"})})]})})]})})}),(0,s.jsxs)("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[(0,s.jsxs)("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[(0,s.jsx)("button",{className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 md:hidden",onClick:()=>g(!0),children:(0,s.jsx)(v,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{className:"flex-1 px-4 flex justify-between",children:[(0,s.jsx)("div",{className:"flex-1 flex"}),(0,s.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Welcome back, ",(0,s.jsx)("span",{className:"font-medium",children:null==r?void 0:r.firstName})]})})]})]}),(0,s.jsx)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:(0,s.jsx)("div",{className:"py-6",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:t})})})]})]}):null}},5771:function(e,t,r){"use strict";r.d(t,{H:function(){return o},a:function(){return c}});var s=r(7573),n=r(7653),a=r(1695),l=r(1493);let i=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0),d=(0,a.useRouter)();(0,n.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=localStorage.getItem("token");if(!e){u(!1);return}l.x.setToken(e);let t=await l.x.get("/auth/me");t.success&&t.data?o(t.data.user):(localStorage.removeItem("token"),l.x.removeToken())}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("token"),l.x.removeToken()}finally{u(!1)}},f=async(e,t)=>{try{let r=await l.x.post("/auth/login",{email:e,password:t});if(r.success&&r.data){let{user:e,token:t}=r.data;localStorage.setItem("token",t),l.x.setToken(t),o(e),d.push("/dashboard")}else throw Error(r.error||"Login failed")}catch(e){throw console.error("Login failed:",e),e}},x=async e=>{try{let t=await l.x.post("/auth/register",e);if(t.success&&t.data){let{user:e,token:r}=t.data;localStorage.setItem("token",r),l.x.setToken(r),o(e),d.push("/dashboard")}else throw Error(t.error||"Registration failed")}catch(e){throw console.error("Registration failed:",e),e}};return(0,s.jsx)(i.Provider,{value:{user:r,login:f,register:x,logout:()=>{localStorage.removeItem("token"),l.x.removeToken(),o(null),d.push("/login")},isLoading:c,isAuthenticated:!!r},children:t})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1493:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var s=r(8571);class n{setToken(e){this.token=e}removeToken(){this.token=null}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseURL).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token));try{let e=await fetch(r,{...t,headers:s}),n=await e.json();if(!e.ok)return{success:!1,error:n.error||n.message||"Request failed"};return{success:!0,data:n}}catch(e){return console.error("API request failed:",e),{success:!1,error:e instanceof Error?e.message:"Network error"}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}async upload(e,t){let r="".concat(this.baseURL).concat(e),s={};this.token&&(s.Authorization="Bearer ".concat(this.token));try{let e=await fetch(r,{method:"POST",headers:s,body:t}),n=await e.json();if(!e.ok)return{success:!1,error:n.error||n.message||"Upload failed"};return{success:!0,data:n}}catch(e){return console.error("Upload failed:",e),{success:!1,error:e instanceof Error?e.message:"Upload error"}}}async download(e){let t="".concat(this.baseURL).concat(e),r={};this.token&&(r.Authorization="Bearer ".concat(this.token));try{let e=await fetch(t,{method:"GET",headers:r});if(!e.ok)throw Error("Download failed");return e.blob()}catch(e){return console.error("Download failed:",e),null}}constructor(){this.token=null,this.baseURL=s.env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api"}}let a=new n},6693:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(4313).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1026:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(4313).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},6673:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(4313).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},4823:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(4313).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5330:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(4313).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},269:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(4313).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1695:function(e,t,r){"use strict";var s=r(1219);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},8571:function(e){var t,r,s,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(e){r=l}}();var o=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?o=s.concat(o):u=-1,o.length&&h())}function h(){if(!c){var e=i(d);c=!0;for(var t=o.length;t;){for(s=o,o=[];++u<t;)s&&s[u].run();u=-1,t=o.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function x(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new f(e,t)),1!==o.length||c||i(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=x,n.addListener=x,n.once=x,n.off=x,n.removeListener=x,n.removeAllListeners=x,n.emit=x,n.prependListener=x,n.prependOnceListener=x,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},function(e){e.O(0,[697,293,528,744],function(){return e(e.s=3687)}),_N_E=e.O()}]);