(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{4854:function(e,s,t){Promise.resolve().then(t.bind(t,2611))},2611:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return I}});var a=t(7573),r=t(7653),n=t(1695),i=t(1493),c=t(1090),l=t(3896),d=t(5155),o=t(2439),m=t(7126),x=t(1359),h=t(2482),u=t(8333),g=t(1095),p=t(6693),y=t(743),j=t(2359),f=t(4965),N=t(8983);function b(e){let{insights:s,constraintSuggestions:t,predictiveInsights:n,serviceStatus:i,className:c=""}=e,[b,v]=(0,r.useState)("insights"),[w,A]=(0,r.useState)(new Set),k=e=>{let s=new Set(w);s.has(e)?s.delete(e):s.add(e),A(s)},C=e=>{switch(e){case"strength":return(0,a.jsx)(l.Z,{className:"h-5 w-5 text-green-500"});case"weakness":return(0,a.jsx)(d.Z,{className:"h-5 w-5 text-red-500"});case"opportunity":return(0,a.jsx)(o.Z,{className:"h-5 w-5 text-blue-500"});case"risk":return(0,a.jsx)(d.Z,{className:"h-5 w-5 text-orange-500"});default:return(0,a.jsx)(m.Z,{className:"h-5 w-5 text-gray-500"})}},I=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},E=e=>e>=.8?"text-green-600":e>=.6?"text-yellow-600":"text-red-600",Z=e=>{switch(e){case"high":return"text-red-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}};return i.configured?(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg ".concat(c),children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-6 w-6 text-purple-500 mr-3"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"AI-Powered Insights"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1"}),"Claude AI Active"]})})]})}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"-mb-px flex",children:[(0,a.jsx)("button",{onClick:()=>v("insights"),className:"py-4 px-6 border-b-2 font-medium text-sm ".concat("insights"===b?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Insights (",s.length,")"]})}),(0,a.jsx)("button",{onClick:()=>v("constraints"),className:"py-4 px-6 border-b-2 font-medium text-sm ".concat("constraints"===b?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Suggestions (",t.length,")"]})}),(0,a.jsx)("button",{onClick:()=>v("predictions"),className:"py-4 px-6 border-b-2 font-medium text-sm ".concat("predictions"===b?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Predictions (",n.predictions.length,")"]})})]})}),(0,a.jsxs)("div",{className:"p-6",children:["insights"===b&&(0,a.jsx)("div",{className:"space-y-4",children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No insights available"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Run an analysis with AI insights enabled to see recommendations."})]}):s.map((e,s)=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[C(e.type),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ".concat(I(e.priority)),children:e.priority.toUpperCase()}),e.actionable&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,a.jsx)(y.Z,{className:"h-3 w-3 mr-1"}),"Actionable"]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),"Category: ",e.category]}),(0,a.jsxs)("span",{className:"font-medium ".concat(E(e.confidence)),children:[Math.round(100*e.confidence),"% confidence"]})]})]})]})})},s))}),"constraints"===b&&(0,a.jsx)("div",{className:"space-y-4",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(g.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No constraint suggestions"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"AI analysis didn't identify new constraint opportunities for this dataset."})]}):t.map((e,s)=>{let t="constraint-".concat(s),r=w.has(t);return(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(I(e.priority.toLowerCase())),children:e.priority}),(0,a.jsx)("button",{onClick:()=>k(t),className:"text-gray-400 hover:text-gray-600",children:r?(0,a.jsx)(f.Z,{className:"h-4 w-4"}):(0,a.jsx)(N.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mb-2",children:[(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Constraint:"})," ",e.metric," ",e.operator," ",e.value]}),(0,a.jsxs)("span",{className:"font-medium ".concat(E(e.confidence)),children:[Math.round(100*e.confidence),"% confidence"]})]}),r&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-gray-900 mb-1",children:"Rationale:"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.rationale})]})]})})},s)})}),"predictions"===b&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Financial Forecasts"}),(0,a.jsx)("div",{className:"space-y-3",children:n.predictions.map((e,s)=>(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-blue-900 capitalize",children:e.metric.replace(/_/g," ")}),(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(E(e.confidence)),children:[Math.round(100*e.confidence),"% confidence"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,a.jsx)("span",{className:"text-lg font-bold text-blue-900",children:"number"==typeof e.forecast?e.forecast.toLocaleString():e.forecast}),(0,a.jsx)("span",{className:"text-sm text-blue-700",children:e.timeframe})]}),(0,a.jsx)("p",{className:"text-sm text-blue-800",children:e.reasoning})]},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Risk Factors"}),(0,a.jsx)("div",{className:"space-y-3",children:n.risks.map((e,s)=>(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-red-900",children:e.factor}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(Z(e.impact)),children:[e.impact.toUpperCase()," impact"]}),(0,a.jsxs)("span",{className:"text-sm text-red-700",children:[Math.round(100*e.probability),"% probability"]})]})]}),(0,a.jsx)("p",{className:"text-sm text-red-800",children:e.description})]},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Growth Opportunities"}),(0,a.jsx)("div",{className:"space-y-3",children:n.opportunities.map((e,s)=>(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-green-900",children:e.area}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(Z(e.potential)),children:[e.potential.toUpperCase()," potential"]}),(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(E(e.confidence)),children:[Math.round(100*e.confidence),"% confidence"]})]})]}),(0,a.jsx)("p",{className:"text-sm text-green-800",children:e.description})]},s))})]})]})]})]}):(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 ".concat(c),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-8 w-8 text-yellow-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-yellow-800 mb-1",children:"AI Insights Not Available"}),(0,a.jsx)("p",{className:"text-sm text-yellow-700",children:i.message})]})]})})}var v=t(5555),w=t(1883),A=t(1733),k=t(8623),C=t(997);function I(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),[t,o]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),[u,g]=(0,r.useState)(!0),[p,y]=(0,r.useState)(!1),[j,f]=(0,r.useState)(null),N=async()=>{try{let s=await i.x.get("/analysis/".concat(null==e?void 0:e.id));s.success&&s.data&&(o(s.data.analysis),h(s.data.stats))}catch(e){console.error("Error fetching analysis:",e),c.A.error("Failed to load analysis details")}finally{g(!1)}},I=async()=>{try{let e=await i.x.get("/analysis/ai-status");e.success&&e.data&&f(e.data)}catch(e){console.warn("Failed to fetch AI status:",e)}},E=async()=>{if(t){y(!0);try{let e=await i.x.post("/analysis/".concat(t.id,"/ai-insights"));if(e.success&&e.data){let s=e.data;o(e=>e?{...e,aiInsights:{insights:s.insights||[],constraintSuggestions:s.constraintSuggestions||[],predictiveInsights:s.predictiveInsights||{predictions:[],risks:[],opportunities:[]},generatedAt:new Date().toISOString()}}:null),c.A.success("AI insights generated successfully")}}catch(e){console.error("Error generating AI insights:",e),c.A.error("Failed to generate AI insights")}finally{y(!1)}}},Z=async()=>{if(t)try{let e=await i.x.download("/analysis/".concat(t.id,"/report"));if(e){let s=window.URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="analysis_".concat(t.id,"_report.csv"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a),c.A.success("Report downloaded successfully")}}catch(e){c.A.error("Download failed")}},S=async()=>{if(t)try{(await i.x.post("/analysis/".concat(t.id,"/rerun"))).success&&(c.A.success("Analysis restarted successfully"),s.push("/analysis"))}catch(e){c.A.error("Failed to restart analysis")}},U=async()=>{if(t&&confirm("Are you sure you want to delete this analysis?"))try{(await i.x.delete("/analysis/".concat(t.id))).success&&(c.A.success("Analysis deleted successfully"),s.push("/analysis"))}catch(e){c.A.error("Failed to delete analysis")}};(0,r.useEffect)(()=>{N(),I()},[null==e?void 0:e.id]);let L=e=>{switch(e.toLowerCase()){case"critical":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-orange-600 bg-orange-50 border-orange-200";case"info":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},T=e=>new Date(e).toLocaleString();return u?(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)("div",{className:"h-4 w-4 bg-gray-200 rounded mr-2"}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3"})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-4"}),(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full"},s))})]})]}):t&&m?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("button",{onClick:()=>s.push("/analysis"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-1"}),"Back to Analysis"]}),(0,a.jsxs)("div",{className:"md:flex md:items-center md:justify-between",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(e=>{switch(e){case"COMPLETED":return(0,a.jsx)(l.Z,{className:"h-6 w-6 text-green-500"});case"RUNNING":return(0,a.jsx)(v.Z,{className:"h-6 w-6 text-blue-500"});case"FAILED":return(0,a.jsx)(d.Z,{className:"h-6 w-6 text-red-500"});default:return(0,a.jsx)(v.Z,{className:"h-6 w-6 text-gray-500"})}})(t.status),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl",children:"Analysis Details"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:[t.document.fileName," • ",t.document.company.name]})]})]})}),(0,a.jsxs)("div",{className:"mt-4 flex md:mt-0 md:ml-4 space-x-2",children:["COMPLETED"===t.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:Z,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),"Download Report"]}),(null==j?void 0:j.configured)&&!t.aiInsights&&(0,a.jsxs)("button",{onClick:E,disabled:p,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50",children:[p?(0,a.jsx)(v.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Generate AI Insights"]})]}),("COMPLETED"===t.status||"FAILED"===t.status)&&(0,a.jsxs)("button",{onClick:S,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4 mr-2"}),"Rerun"]}),(0,a.jsxs)("button",{onClick:U,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50",children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg mb-6",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Analysis Overview"})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:m.totalMetrics}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Financial Metrics"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:m.constraintsEvaluated}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Constraints Evaluated"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-red-600",children:m.totalAlerts}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Total Alerts"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:m.unacknowledgedAlerts}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Unacknowledged"})]})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Analysis Details"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Status:"})," ",(0,a.jsx)("span",{className:"font-medium",children:t.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Started:"})," ",(0,a.jsx)("span",{className:"font-medium",children:T(t.startedAt)})]}),t.completedAt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Duration:"})," ",(0,a.jsx)("span",{className:"font-medium",children:((e,s)=>{if(!s)return"In progress";let t=new Date(e).getTime(),a=new Date(s).getTime();return"".concat(Math.round((a-t)/1e3),"s")})(t.startedAt,t.completedAt)})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Document Information"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"File:"})," ",(0,a.jsx)("span",{className:"font-medium",children:t.document.fileName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Type:"})," ",(0,a.jsx)("span",{className:"font-medium",children:t.document.documentType})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Company:"})," ",(0,a.jsx)("span",{className:"font-medium",children:t.document.company.name})]}),t.document.company.ticker&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Ticker:"})," ",(0,a.jsx)("span",{className:"font-medium",children:t.document.company.ticker})]})]})]})]})]})]}),t.aiInsights&&j&&(0,a.jsx)(b,{insights:t.aiInsights.insights,constraintSuggestions:t.aiInsights.constraintSuggestions,predictiveInsights:t.aiInsights.predictiveInsights,serviceStatus:j,className:"mb-6"}),t.alerts.length>0&&(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg mb-6",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Constraint Violations (",t.alerts.length,")"]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:t.alerts.map(e=>(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(L(e.severity)),children:e.severity.toUpperCase()}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.constraint.name}),!e.isAcknowledged&&(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Unacknowledged"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Expected: ",e.expectedValue]}),(0,a.jsxs)("span",{children:["Actual: ",e.actualValue]}),(0,a.jsxs)("span",{children:["Created: ",T(e.createdAt)]})]})]})})},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Financial Metrics (",t.financialMetrics.length,")"]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.financialMetrics.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:e.name.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["number"==typeof e.value?e.value.toLocaleString():e.value,e.unit&&(0,a.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:e.unit})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[(0,a.jsx)("span",{children:e.period}),(0,a.jsxs)("span",{children:[Math.round(100*e.confidence),"% confidence"]})]})]},e.id))})})]}),t.errorMessage&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-red-500 mr-2"}),(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Analysis Error"})]}),(0,a.jsx)("p",{className:"mt-2 text-sm text-red-700",children:t.errorMessage})]})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.Z,{className:"mx-auto h-12 w-12 text-red-500"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Analysis not found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"The analysis you're looking for doesn't exist or you don't have permission to view it."}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("button",{onClick:()=>s.push("/analysis"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Back to Analysis"]})})]})}},1090:function(e,s,t){"use strict";t.d(s,{A:function(){return o},x:function(){return m}});var a=t(7573),r=t(7653),n=t(269);let i=[],c=[],l=e=>{let s=Math.random().toString(36).substring(2,9),t={...e,id:s};i=[...i,t],c.forEach(e=>e(i)),setTimeout(()=>{d(s)},e.duration||5e3)},d=e=>{i=i.filter(s=>s.id!==e),c.forEach(e=>e(i))},o={success:(e,s)=>l({type:"success",description:e,title:s}),error:(e,s)=>l({type:"error",description:e,title:s}),warning:(e,s)=>l({type:"warning",description:e,title:s}),info:(e,s)=>l({type:"info",description:e,title:s})};function m(){let[e,s]=(0,r.useState)([]);return((0,r.useEffect)(()=>{let e=e=>s(e);return c.push(e),()=>{c=c.filter(s=>s!==e)}},[]),0===e.length)?null:(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>(0,a.jsx)("div",{className:"\n            max-w-sm p-4 rounded-lg shadow-lg border backdrop-blur-sm\n            animate-in slide-in-from-top-2 fade-in-0 duration-300\n            ".concat("success"===e.type?"bg-green-50 border-green-200 text-green-800":"","\n            ").concat("error"===e.type?"bg-red-50 border-red-200 text-red-800":"","\n            ").concat("warning"===e.type?"bg-yellow-50 border-yellow-200 text-yellow-800":"","\n            ").concat("info"===e.type?"bg-blue-50 border-blue-200 text-blue-800":"","\n          "),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[e.title&&(0,a.jsx)("h4",{className:"font-semibold text-sm mb-1",children:e.title}),e.description&&(0,a.jsx)("p",{className:"text-sm opacity-90",children:e.description})]}),(0,a.jsx)("button",{onClick:()=>d(e.id),className:"ml-3 text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(n.Z,{size:16})})]})},e.id))})}},1493:function(e,s,t){"use strict";t.d(s,{x:function(){return n}});var a=t(8571);class r{setToken(e){this.token=e}removeToken(){this.token=null}async request(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(this.baseURL).concat(e),a={"Content-Type":"application/json",...s.headers};this.token&&(a.Authorization="Bearer ".concat(this.token));try{let e=await fetch(t,{...s,headers:a}),r=await e.json();if(!e.ok)return{success:!1,error:r.error||r.message||"Request failed"};return{success:!0,data:r}}catch(e){return console.error("API request failed:",e),{success:!1,error:e instanceof Error?e.message:"Network error"}}}async get(e){return this.request(e,{method:"GET"})}async post(e,s){return this.request(e,{method:"POST",body:s?JSON.stringify(s):void 0})}async put(e,s){return this.request(e,{method:"PUT",body:s?JSON.stringify(s):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}async upload(e,s){let t="".concat(this.baseURL).concat(e),a={};this.token&&(a.Authorization="Bearer ".concat(this.token));try{let e=await fetch(t,{method:"POST",headers:a,body:s}),r=await e.json();if(!e.ok)return{success:!1,error:r.error||r.message||"Upload failed"};return{success:!0,data:r}}catch(e){return console.error("Upload failed:",e),{success:!1,error:e instanceof Error?e.message:"Upload error"}}}async download(e){let s="".concat(this.baseURL).concat(e),t={};this.token&&(t.Authorization="Bearer ".concat(this.token));try{let e=await fetch(s,{method:"GET",headers:t});if(!e.ok)throw Error("Download failed");return e.blob()}catch(e){return console.error("Download failed:",e),null}}constructor(){this.token=null,this.baseURL=a.env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api"}}let n=new r}},function(e){e.O(0,[462,293,528,744],function(){return e(e.s=4854)}),_N_E=e.O()}]);