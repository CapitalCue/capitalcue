(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3888:function(e,t,r){Promise.resolve().then(r.bind(r,3388)),Promise.resolve().then(r.t.bind(r,9438,23)),Promise.resolve().then(r.t.bind(r,2625,23))},3388:function(e,t,r){"use strict";r.d(t,{Providers:function(){return c}});var o=r(7573),n=r(5139);r(5081);var s=r(5771),i=r(1090),a=r(7653);function c(e){let{children:t}=e,[r]=(0,a.useState)(()=>new n.QueryClient({defaultOptions:{queries:{staleTime:6e4,retry:1}}}));return(0,o.jsxs)(n.QueryClientProvider,{client:r,children:[(0,o.jsxs)(s.H,{children:[t,(0,o.jsx)(i.x,{})]}),!1]})}},1090:function(e,t,r){"use strict";r.d(t,{A:function(){return u},x:function(){return d}});var o=r(7573),n=r(7653),s=r(269);let i=[],a=[],c=e=>{let t=Math.random().toString(36).substring(2,9),r={...e,id:t};i=[...i,r],a.forEach(e=>e(i)),setTimeout(()=>{l(t)},e.duration||5e3)},l=e=>{i=i.filter(t=>t.id!==e),a.forEach(e=>e(i))},u={success:(e,t)=>c({type:"success",description:e,title:t}),error:(e,t)=>c({type:"error",description:e,title:t}),warning:(e,t)=>c({type:"warning",description:e,title:t}),info:(e,t)=>c({type:"info",description:e,title:t})};function d(){let[e,t]=(0,n.useState)([]);return((0,n.useEffect)(()=>{let e=e=>t(e);return a.push(e),()=>{a=a.filter(t=>t!==e)}},[]),0===e.length)?null:(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>(0,o.jsx)("div",{className:"\n            max-w-sm p-4 rounded-lg shadow-lg border backdrop-blur-sm\n            animate-in slide-in-from-top-2 fade-in-0 duration-300\n            ".concat("success"===e.type?"bg-green-50 border-green-200 text-green-800":"","\n            ").concat("error"===e.type?"bg-red-50 border-red-200 text-red-800":"","\n            ").concat("warning"===e.type?"bg-yellow-50 border-yellow-200 text-yellow-800":"","\n            ").concat("info"===e.type?"bg-blue-50 border-blue-200 text-blue-800":"","\n          "),children:(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,o.jsxs)("div",{className:"flex-1",children:[e.title&&(0,o.jsx)("h4",{className:"font-semibold text-sm mb-1",children:e.title}),e.description&&(0,o.jsx)("p",{className:"text-sm opacity-90",children:e.description})]}),(0,o.jsx)("button",{onClick:()=>l(e.id),className:"ml-3 text-gray-400 hover:text-gray-600 transition-colors",children:(0,o.jsx)(s.Z,{size:16})})]})},e.id))})}},5771:function(e,t,r){"use strict";r.d(t,{H:function(){return c},a:function(){return l}});var o=r(7573),n=r(7653),s=r(1695),i=r(1493);let a=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,n.useState)(null),[l,u]=(0,n.useState)(!0),d=(0,s.useRouter)();(0,n.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=localStorage.getItem("token");if(!e){u(!1);return}i.x.setToken(e);let t=await i.x.get("/auth/me");t.success&&t.data?c(t.data.user):(localStorage.removeItem("token"),i.x.removeToken())}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("token"),i.x.removeToken()}finally{u(!1)}},f=async(e,t)=>{try{let r=await i.x.post("/auth/login",{email:e,password:t});if(r.success&&r.data){let{user:e,token:t}=r.data;localStorage.setItem("token",t),i.x.setToken(t),c(e),d.push("/dashboard")}else throw Error(r.error||"Login failed")}catch(e){throw console.error("Login failed:",e),e}},m=async e=>{try{let t=await i.x.post("/auth/register",e);if(t.success&&t.data){let{user:e,token:r}=t.data;localStorage.setItem("token",r),i.x.setToken(r),c(e),d.push("/dashboard")}else throw Error(t.error||"Registration failed")}catch(e){throw console.error("Registration failed:",e),e}};return(0,o.jsx)(a.Provider,{value:{user:r,login:f,register:m,logout:()=>{localStorage.removeItem("token"),i.x.removeToken(),c(null),d.push("/login")},isLoading:l,isAuthenticated:!!r},children:t})}function l(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1493:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});var o=r(8571);class n{setToken(e){this.token=e}removeToken(){this.token=null}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseURL).concat(e),o={"Content-Type":"application/json",...t.headers};this.token&&(o.Authorization="Bearer ".concat(this.token));try{let e=await fetch(r,{...t,headers:o}),n=await e.json();if(!e.ok)return{success:!1,error:n.error||n.message||"Request failed"};return{success:!0,data:n}}catch(e){return console.error("API request failed:",e),{success:!1,error:e instanceof Error?e.message:"Network error"}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}async upload(e,t){let r="".concat(this.baseURL).concat(e),o={};this.token&&(o.Authorization="Bearer ".concat(this.token));try{let e=await fetch(r,{method:"POST",headers:o,body:t}),n=await e.json();if(!e.ok)return{success:!1,error:n.error||n.message||"Upload failed"};return{success:!0,data:n}}catch(e){return console.error("Upload failed:",e),{success:!1,error:e instanceof Error?e.message:"Upload error"}}}async download(e){let t="".concat(this.baseURL).concat(e),r={};this.token&&(r.Authorization="Bearer ".concat(this.token));try{let e=await fetch(t,{method:"GET",headers:r});if(!e.ok)throw Error("Download failed");return e.blob()}catch(e){return console.error("Download failed:",e),null}}constructor(){this.token=null,this.baseURL=o.env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api"}}let s=new n},2625:function(){}},function(e){e.O(0,[31,848,293,528,744],function(){return e(e.s=3888)}),_N_E=e.O()}]);