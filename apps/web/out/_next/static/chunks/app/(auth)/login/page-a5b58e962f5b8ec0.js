(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{7379:function(e,t,r){Promise.resolve().then(r.bind(r,9577))},9577:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(7573),s=r(7653),o=r(5771),a=r(1090),i=r(8146),c=r(1569),l=r(7686),u=r(844),d=r(8333);function h(){let[e,t]=(0,s.useState)(""),[r,h]=(0,s.useState)(""),[f,m]=(0,s.useState)(!1),[y,g]=(0,s.useState)(!1),{login:p}=(0,o.a)(),x=async t=>{if(t.preventDefault(),!e||!r){a.A.error("Please fill in all fields");return}g(!0);try{await p(e,r),a.A.success("Login successful!")}catch(e){console.error("Login error:",e),a.A.error(e instanceof Error?e.message:"Login failed")}finally{g(!1)}};return(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome back"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Sign in to your account"})]}),(0,n.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(c.Z,{className:"h-5 w-5 text-gray-400"})}),(0,n.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email",disabled:y})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(l.Z,{className:"h-5 w-5 text-gray-400"})}),(0,n.jsx)("input",{id:"password",type:f?"text":"password",value:r,onChange:e=>h(e.target.value),className:"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password",disabled:y}),(0,n.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!f),children:f?(0,n.jsx)(u.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,n.jsx)(d.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),(0,n.jsx)("button",{type:"submit",disabled:y,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y?(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})]}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,n.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,n.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,n.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"New to Financial Analyzer?"})})]}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(i.default,{href:"/register",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create new account"})})]})]})}},1090:function(e,t,r){"use strict";r.d(t,{A:function(){return u},x:function(){return d}});var n=r(7573),s=r(7653),o=r(269);let a=[],i=[],c=e=>{let t=Math.random().toString(36).substring(2,9),r={...e,id:t};a=[...a,r],i.forEach(e=>e(a)),setTimeout(()=>{l(t)},e.duration||5e3)},l=e=>{a=a.filter(t=>t.id!==e),i.forEach(e=>e(a))},u={success:(e,t)=>c({type:"success",description:e,title:t}),error:(e,t)=>c({type:"error",description:e,title:t}),warning:(e,t)=>c({type:"warning",description:e,title:t}),info:(e,t)=>c({type:"info",description:e,title:t})};function d(){let[e,t]=(0,s.useState)([]);return((0,s.useEffect)(()=>{let e=e=>t(e);return i.push(e),()=>{i=i.filter(t=>t!==e)}},[]),0===e.length)?null:(0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>(0,n.jsx)("div",{className:"\n            max-w-sm p-4 rounded-lg shadow-lg border backdrop-blur-sm\n            animate-in slide-in-from-top-2 fade-in-0 duration-300\n            ".concat("success"===e.type?"bg-green-50 border-green-200 text-green-800":"","\n            ").concat("error"===e.type?"bg-red-50 border-red-200 text-red-800":"","\n            ").concat("warning"===e.type?"bg-yellow-50 border-yellow-200 text-yellow-800":"","\n            ").concat("info"===e.type?"bg-blue-50 border-blue-200 text-blue-800":"","\n          "),children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[e.title&&(0,n.jsx)("h4",{className:"font-semibold text-sm mb-1",children:e.title}),e.description&&(0,n.jsx)("p",{className:"text-sm opacity-90",children:e.description})]}),(0,n.jsx)("button",{onClick:()=>l(e.id),className:"ml-3 text-gray-400 hover:text-gray-600 transition-colors",children:(0,n.jsx)(o.Z,{size:16})})]})},e.id))})}},5771:function(e,t,r){"use strict";r.d(t,{H:function(){return c},a:function(){return l}});var n=r(7573),s=r(7653),o=r(1695),a=r(1493);let i=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[l,u]=(0,s.useState)(!0),d=(0,o.useRouter)();(0,s.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=localStorage.getItem("token");if(!e){u(!1);return}a.x.setToken(e);let t=await a.x.get("/auth/me");t.success&&t.data?c(t.data.user):(localStorage.removeItem("token"),a.x.removeToken())}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("token"),a.x.removeToken()}finally{u(!1)}},f=async(e,t)=>{try{let r=await a.x.post("/auth/login",{email:e,password:t});if(r.success&&r.data){let{user:e,token:t}=r.data;localStorage.setItem("token",t),a.x.setToken(t),c(e),d.push("/dashboard")}else throw Error(r.error||"Login failed")}catch(e){throw console.error("Login failed:",e),e}},m=async e=>{try{let t=await a.x.post("/auth/register",e);if(t.success&&t.data){let{user:e,token:r}=t.data;localStorage.setItem("token",r),a.x.setToken(r),c(e),d.push("/dashboard")}else throw Error(t.error||"Registration failed")}catch(e){throw console.error("Registration failed:",e),e}};return(0,n.jsx)(i.Provider,{value:{user:r,login:f,register:m,logout:()=>{localStorage.removeItem("token"),a.x.removeToken(),c(null),d.push("/login")},isLoading:l,isAuthenticated:!!r},children:t})}function l(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1493:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var n=r(8571);class s{setToken(e){this.token=e}removeToken(){this.token=null}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseURL).concat(e),n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token));try{let e=await fetch(r,{...t,headers:n}),s=await e.json();if(!e.ok)return{success:!1,error:s.error||s.message||"Request failed"};return{success:!0,data:s}}catch(e){return console.error("API request failed:",e),{success:!1,error:e instanceof Error?e.message:"Network error"}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}async upload(e,t){let r="".concat(this.baseURL).concat(e),n={};this.token&&(n.Authorization="Bearer ".concat(this.token));try{let e=await fetch(r,{method:"POST",headers:n,body:t}),s=await e.json();if(!e.ok)return{success:!1,error:s.error||s.message||"Upload failed"};return{success:!0,data:s}}catch(e){return console.error("Upload failed:",e),{success:!1,error:e instanceof Error?e.message:"Upload error"}}}async download(e){let t="".concat(this.baseURL).concat(e),r={};this.token&&(r.Authorization="Bearer ".concat(this.token));try{let e=await fetch(t,{method:"GET",headers:r});if(!e.ok)throw Error("Download failed");return e.blob()}catch(e){return console.error("Download failed:",e),null}}constructor(){this.token=null,this.baseURL=n.env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api"}}let o=new s},844:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(4313).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},8333:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(4313).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7686:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(4313).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},1569:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(4313).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},269:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(4313).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1695:function(e,t,r){"use strict";var n=r(1219);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},8571:function(e){var t,r,n,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c=[],l=!1,u=-1;function d(){l&&n&&(l=!1,n.length?c=n.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(n=c,c=[];++u<t;)n&&n[u].run();u=-1,t=c.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||l||i(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},function(e){e.O(0,[697,293,528,744],function(){return e(e.s=7379)}),_N_E=e.O()}]);